--[[
    Script created by: Frazzle

    Contact: frazzle9999@gmail.com

    Note: this script is licensed under "No License", you are allowed to:

    Use and Edit the Script.

    you are not allowed to:

    Copy, re-release, re-distribute it without my written permission.
--]]
insurance = {
    ["blista"] = 5500,
    ["brioso"] = 6000,
    ["dilettante"] = 8000,
    ["issi2"] = 7500,
    ["panto"] = 2500,
    ["prairie"] = 3500,
    ["rhapsody"] = 6500,
    ["cogcabrio"] = 14000,

    ["exemplar"] = 13000,
    ["f620"] = 13000,
    ["felon"] = 23500,
    ["felon2"] = 24500,
    ["jackal"] = 21000,
    ["oracle"] = 18500,
    ["oracle2"] = 19500,
    ["sentinel"] = 16500,
    ["sentinel2"] = 17500,
    ["windsor"] = 11000,
    ["windsor2"] = 12000,
    ["zion"] = 11200,
    ["zion2"] = 12200,

    ["ninef"] = 135500,
    ["ninef2"] = 136500,
    ["alpha"] = 115500,
    ["banshee"] = 143500,
    ["banshee2"] = 253500,
    ["bestiagts"] = 144500,
    ["buffalo"] = 128000,
    ["buffalo2"] = 129850,
    ["carbonizzare"] = 136800,
    ["raiden"] = 121500,
    ["comet2"] = 137000,
    ["comet3"] = 137500,
    ["comet4"] = 138000,
    ["comet5"] = 137500,
    ["coquette"] = 146500,
    ["tampa2"] = 142500,
    ["elegy2"] = 124500,
    ["elegy"] = 125500,
    ["feltzer2"] = 136500,
    ["furoregt"] = 126500,
    ["fusilade"] = 128500,
    ["futo"] = 133520,
    ["blista3"] = 121000,
    ["jester"] = 275000,
    ["jester2"] = 285000,
    ["khamelion"] = 123500,
    ["kuruma"] = 129000,
    ["kuruma2"] = 133000,
    ["lynx"] = 126000,
    ["massacro"] = 163000,
    ["massacro2"] = 165000,
    ["neon"] = 190000,
    ["omnis"] = 129000,
    ["pariah"] = 121000,
    ["penumbra"] = 118500,
    ["rapidgt"] = 128000,
    ["rapidgt2"] = 131000,
    ["raptor"] = 147500,
    ["revolter"] = 115000,
    ["ruston"] = 146500,
    ["schafter2"] = 119500,
    ["schafter3"] = 122000,
    ["sentinel3"] = 111000,
    ["seven70"] = 147000,
    ["specter"] = 134500,
    ["specter2"] = 136500,
    ["buffalo3"] = 129000,
    ["streiter"] = 128000,
    ["sultan"] = 119500,
    ["sultanrs"] = 250000,
    ["surano"] = 123500,
    ["tropos"] = 143000,
    ["verlierer2"] = 139000,

    ["ardent"] = 30000,
    ["casco"] = 24000,
    ["cheetah2"] = 26000,
    ["coquette2"] = 32000,
    ["btype2"] = 74000,
    ["gt500"] = 32500,
    ["infernus2"] = 102500,
    ["jb700"] = 33000,
    ["z190"] = 41000,
    ["mamba"] = 22000,
    ["manana"] = 18000,
    ["monroe"] = 23500,
    ["peyote"] = 17000,
    ["pigalle"] = 15500,
    ["rapidgt3"] = 32000,
    ["btype"] = 22500,
    ["btype3"] = 24500,
    ["savestra"] = 18000,
    ["stinger"] = 47000,
    ["stingergt"] = 48000,
    ["feltzer3"] = 28500,
    ["torero"] = 17500,
    ["tornado"] = 15500,
    ["tornado3"] = 9000,
    ["tornado4"] = 7500,
    ["tornado5"] = 17500,
    ["tornado6"] = 11000,
    ["turismo2"] = 32500,
    ["viseris"] = 45000,
    ["ztype"] = 14500,

    ["pfister811"] = 1350000,
    ["adder"] = 5700000,
    ["bullet"] = 1120000,
    ["cheetah"] = 1180000,
    ["cyclone"] = 6000000,
    ["entityxf"] = 1125000,
    ["sheava"] = 1145000,
    ["fmj"] = 1115000,
    ["gp1"] = 1150000,
    ["infernus"] = 1210000,
    ["italigtb"] = 1500000,
    ["italigtb2"] = 1900000,
    ["nero"] = 1300000,
    ["nero2"] = 1400000,
    ["osiris"] = 950000,
    ["autarch"] = 1300000,
    ["penetrator"] = 805000,
    ["le7b"] = 1475000,
    ["reaper"] = 725000,
    ["sc1"] = 1150000,
    ["t20"] = 5600000,
    ["tempesta"] = 945000,
    ["turismor"] = 1560000,
    ["tyrus"] = 1550000,
    ["vacca"] = 1240000,
    ["vagner"] = 1005000,
    ["visione"] = 1500000,
    ["voltic"] = 545000,
    ["xa21"] = 5000000,
    ["prototipo"] = 1700000,
    ["zentorno"] = 4900000,

    ["blade"] = 15200,
    ["buccaneer"] = 22000,
    ["buccaneer2"] = 23500,
    ["stallion2"] = 0,
    ["chino"] = 37000,
    ["chino2"] = 38000,
    ["coquette3"] = 123000,
    ["dominator"] = 35000,
    ["dukes"] = 36000,
    ["dukes2"] = 0,
    ["gauntlet"] = 22000,
    ["hermes"] = 20000,
    ["hotknife"] = 60000,
    ["hustler"] = 26000,
    ["faction"] = 26000,
    ["faction2"] = 27000,
    ["faction3"] = 27500,
    ["slamvan2"] = 13500,
    ["lurcher"] = 17000,
    ["moonbeam"] = 11000,
    ["moonbeam2"] = 12000,
    ["nightshade"] = 125000,
    ["phoenix"] = 54000,
    ["picador"] = 9000,
    ["dominator2"] = 115000,
    ["ratloader"] = 3000,
    ["ratloader2"] = 4000,
    ["gauntlet2"] = 90000,
    ["ruiner"] = 130000,
    ["ruiner2"] = 0,
    ["sabregt"] = 8500,
    ["sabregt2"] = 9500,
    ["slamvan"] = 6500,
    ["slamvan3"] = 8000,
    ["stallion"] = 0,
    ["tampa"] = 175000,
    ["virgo"] = 65000,
    ["virgo2"] = 67500,
    ["virgo3"] = 68000,
    ["vigero"] = 21000,
    ["voodoo2"] = 2500,
    ["voodoo"] = 3000,
    ["yosemite"] = 27000,

    ["bifta"] = 35000,
    ["bodhi2"] = 13500,
    ["brawler"] = 115000,
    ["kamacho"] = 26000,
    ["trophytruck2"] = 395000,
    ["dubsta3"] = 149000,
    ["dune"] = 20000,
    ["dloader"] = 7000,
    ["bfinjection"] = 4000,
    ["kalahari"] = 21000,
    ["monster"] = 325000,
    ["marshall"] = 325000,
    ["mesa3"] = 47000,
    ["nightshark"] = 0,
    ["rancherxl"] = 7000,
    ["riata"] = 10000,
    ["rebel2"] = 19000,
    ["rebel"] = 3000,
    ["sandking2"] = 29000,
    ["sandking"] = 37000,
    ["trophytruck"] = 435000,

    ["baller"] = 80000,
    ["baller2"] = 83000,
    ["baller3"] = 139000,
    ["baller4"] = 141000,
    ["bjxl"] = 49000,
    ["cavalcade"] = 45000,
    ["cavalcade2"] = 470000,
    ["contender"] = 125000,
    ["dubsta2"] = 120000,
    ["fq2"] = 27000,
    ["granger"] = 35000,
    ["gresley"] = 29000,
    ["habanero"] = 17500,
    ["huntley"] = 95000,
    ["landstalker"] = 48000,
    ["mesa"] = 37000,
    ["patriot"] = 42000,
    ["radi"] = 22000,
    ["rocoto"] = 45000,
    ["seminole"] = 30000,
    ["serrano"] = 30000,
    ["xls"] = 820000,

    ["bison"] = 12000,
    ["bobcatxl"] = 11000,
    ["burrito3"] = 11000,
    ["camper"] = 6000,
    ["gburrito2"] = 8000,
    ["journey"] = 7500,
    ["minivan"] = 8000,
    ["minivan2"] = 9000,
    ["paradise"] = 11000,
    ["rumpo"] = 15000,
    ["rumpo3"] = 19000,
    ["surfer"] = 4000,
    ["surfer2"] = 4500,
    ["youga"] = 5000,
    ["youga2"] = 6000,

    ["asea"] = 12000,
    ["asterope"] = 16000,
    ["cognoscenti"] = 145000,
    ["cog55"] = 150000,
    ["emperor"] = 3000,
    ["emperor2"] = 5000,
    ["fugitive"] = 24000,
    ["glendale"] = 27000,
    ["ingot"] = 9000,
    ["intruder"] = 15000,
    ["premier"] = 10000,
    ["primo"] = 9000,
    ["primo2"] = 11000,
    ["regina"] = 8000,
    ["romero"] = 9500,
    ["schafter2"] = 45000,
    ["stanier"] = 10000,
    ["stratum"] = 9000,
    ["stretch"] = 30000,
    ["superd"] = 175000,
    ["surge"] = 28000,
    ["tailgater"] = 15000,
    ["warrener"] = 27000,
    ["washington"] = 11000,
    
    ["akuma"] = 9000,
    ["avarus"] = 26000,
    ["bagger"] = 19000,
    ["bati"] = 15000,
    ["bati2"] = 17000,
    ["bf400"] = 35000,
    ["carbonrs"] = 40000,
    ["cliffhanger"] = 45000,
    ["daemon"] = 35000,
    ["daemon2"] = 37000,
    ["defiler"] = 112000,
    ["diablous"] = 149000,
    ["diablous2"] = 151000,
    ["double"] = 12000,
    ["enduro"] = 28000,
    ["esskey"] = 64000,
    ["faggio2"] = 1500,
    ["faggio"] = 2500,
    ["faggio3"] = 3500,
    ["fcr"] = 18000,
    ["fcr2"] = 21000,
    ["gargoyle"] = 17000,
    ["hakuchou"] = 62000,
    ["hakuchou2"] = 176000,
    ["hexer"] = 13000,
    ["innovation"] =19500 ,
    ["lectro"] = 43000,
    ["manchez"] = 6500,
    ["nemesis"] = 12000,
    ["nightblade"] = 27000,
    ["pcj"] = 9000,
    ["ratbike"] =5000 ,
    ["ruffian"] = 7000,
    ["sanchez"] = 5000,
    ["Sanctus"] = 89000,
    ["shotaro"] = 1200000,
    ["sovereign"] = 15000,
    ["thrust"] = 17000,
    ["vader"] = 9000,
    ["vindicator"] = 110000,
    ["vortex"] = 72000,
    ["wolfsbane"] = 15000,
    ["zombiea"] = 23000,
    ["zombieb"] = 12000,
}
local slotprice = 500
local emplacement_garage = {
    [1] = {name="Public Garage", colour=1, sprite=357, x=-332.88320922852,y=-779.23046875,z=33.964912414551,id=1,gname="Peaceful St [1]",cost=3000,heading=0.0,maxslots=3}, -- Peaceful St
    [2] = {name="Public Garage", colour=1, sprite=357, x=-443.00497436523,y=185.29835510254,z=75.203712463379,id=2,gname="North LS [2]",cost=2000,heading=0.0,maxslots=2}, -- Public Upper City
    [3] = {name="Public Garage", colour=1, sprite=357, x=1232.4792480469,y=2708.3212890625,z=38.005790710449,id=3,gname="Sandy [3]",cost=1000,heading=0.0,maxslots=1}, -- Public Sandy
    [4] = {name="Public Garage", colour=1, sprite=357, x=117.96788024902,y=6599.45703125,z=32.013603210449,id=4,gname="Paleto [4]",cost=1000,heading=-90.0,maxslots=1}, -- Public Paleto
    [5] = {name="Personal Garage", colour=3, sprite=357, x=947.13641357422,y=-1697.9788818359,z=30.085023880005,id=5,gname="Industrial [5]",cost=2000,heading=-95.0,maxslots=2}, -- Personal
    [6] = {name="Personal Garage", colour=3, sprite=357, x=520.40753173828,y=168.9965057373,z=99.372108459473,id=6,gname="Apartment Complex [6]",cost=2000,heading=-110.0,maxslots=2}, -- Personal
    [7] = {name="Personal Garage", colour=3, sprite=357, x=-667.74456787109,y=-2378.0485839844,z=13.8580493927,id=7,gname="Exceptionalists Way [7]",cost=4000,heading=-45.0,maxslots=4}, -- Personal
    [8] = {name="Personal Garage", colour=3, sprite=357, x=258.68347167969,y=2589.7287597656,z=44.954097747803,id=8,gname="Autoshop Garage [8]",cost=2000,heading=10.0,maxslots=2}, -- Personal
    [9] = {name="Personal Garage", colour=3, sprite=357, x=-34.561923980713,y=6418.0092773438,z=31.442190170288,id=9,gname="Paleto Blvd [9]",cost=2000,heading=225.0,maxslots=2}, -- Personal
    [10] = {name="Personal Garage", colour=3, sprite=357, x=-833.24926757813,y=-392.95385742188,z=31.325246810913,id=10,gname="Weazel [10]",cost=4000,heading=225.0,maxslots=4}, -- Personal
    [11] = {name="Personal Garage", colour=3, sprite=357, x=-30.303638458252,y=2.1268248558044,z=71.200004577637,id=11,gname="Small Garage [11]",cost=2000,heading=150.0,maxslots=2}, -- Personal
    [12] = {name="Personal Garage", colour=3, sprite=357, x=-84.019691467285,y=-820.99694824219,z=36.028030395508,id=12,gname="Maze Tower [12]",cost=5000,heading=-365.0,maxslots=5}, -- Personal
}

RegisterServerEvent("garage:initialise")
AddEventHandler("garage:initialise",function(source, identifier, character_id)
    exports["GHMattiMySQL"]:QueryResultAsync("SELECT * from vehicles WHERE character_id=@character_id", {["@character_id"] = character_id}, function(vehicles)
        for k,v in pairs(vehicles) do
            v.plate = string.format("%X", tostring(v.plate))
            v.plate = strpad(v.plate, 8, "0", "STR_PAD_LEFT")
            v.neon_colour = json.decode(v.neon_colour)
            v.smoke_colour = json.decode(v.smoke_colour)
        end
        TriggerClientEvent("garage:setvehicles", source, vehicles)
    end)
    exports["GHMattiMySQL"]:QueryResultAsync("SELECT * from garages WHERE character_id=@character_id", {["@character_id"] = character_id}, function(garages)
        TriggerClientEvent("garage:setgarages", source, garages)
    end)
end)

RegisterServerEvent("garage:reload")
AddEventHandler("garage:reload",function()
    local source = source
    TriggerEvent('core:getuser', source, function(user)
        if user ~= nil then
            exports["GHMattiMySQL"]:QueryAsync("UPDATE vehicles SET state=@state WHERE character_id=@character_id", {
                ["@identifier"] = user.get("steam"),
                ["@character_id"] = user.get("characterID"),
                ["@state"] = "~g~Stored",
            })
            exports["GHMattiMySQL"]:QueryResultAsync("SELECT * from vehicles WHERE character_id=@character_id", {["@character_id"] = user.get("characterID")}, function(vehicles)
                for k,v in pairs(vehicles) do
                    v.plate = string.format("%X", tostring(v.plate))
                    v.plate = strpad(v.plate, 8, "0", "STR_PAD_LEFT")
                end
                TriggerClientEvent("garage:setvehicles", source, vehicles)
            end)
            exports["GHMattiMySQL"]:QueryResultAsync("SELECT * from garages WHERE character_id=@character_id", {["@character_id"] = user.get("characterID")}, function(garages)
                TriggerClientEvent("garage:setgarages", source, garages)
            end)
        end
    end)
end)

RegisterServerEvent("garage:stored")
AddEventHandler("garage:stored",function(data)
    local source = tonumber(source)
    updateCar(source, data)
    TriggerClientEvent("garage:setvehicle", source, data)
end)

RegisterServerEvent("garage:out")
AddEventHandler("garage:out",function(data)
    local source = tonumber(source)
    --updateCar(source, data)
end)

RegisterServerEvent("garage:transfer")
AddEventHandler("garage:transfer",function(plate, gid)
    local source = tonumber(source)
    TriggerEvent('core:getuser', source, function(user)
        GNotify(source,"Vehicle transferred!")
        exports["GHMattiMySQL"]:QueryAsync("UPDATE vehicles SET garage_id=@garage_id WHERE (character_id = @character_id) AND (plate = @plate)", {
            ["@character_id"] = user.get("characterID"),
            ["@garage_id"] = gid,
            ["@plate"] = tonumber(plate, 16),
        })
        TriggerClientEvent("garage:transfer", source, plate, gid)
    end)
end)

RegisterServerEvent("garage:buy")
AddEventHandler("garage:buy",function(id, slots)
    local source = tonumber(source)
    local cost = emplacement_garage[id].cost + (slotprice * slots)
    TriggerEvent('core:getuser', source, function(user)
        if(user.get("wallet") >= tonumber(cost))then
            user.removeWallet(cost)
            exports["GHMattiMySQL"]:QueryAsync("INSERT INTO garages (`character_id`,`garage_id`,`cost`,`slots`) VALUES (@character_id,@garage_id,@cost,@slots)", {
                ["@character_id"] = user.get("characterID"),
                ["@garage_id"] = id,
                ["@cost"] = cost/2,
                ["@slots"] = slots,
            })          
            GNotify(source,"Garage purchased!")
            TriggerClientEvent("garage:buy", source, {character_id = user.get("characterID"), garage_id = id, cost = cost/2, slots = slots})
        elseif(user.get("bank") >= tonumber(cost))then
            user.removeBank(cost)
            exports["GHMattiMySQL"]:QueryAsync("INSERT INTO garages (`character_id`,`garage_id`,`cost`,`slots`) VALUES (@character_id,@garage_id,@cost,@slots)", {
                ["@character_id"] = user.get("characterID"),
                ["@garage_id"] = id,
                ["@cost"] = cost/2,
                ["@slots"] = slots,
            })          
            GNotify(source,"Garage purchased!")
            TriggerClientEvent("garage:buy", source, {character_id = user.get("characterID"), garage_id = id, cost = cost/2, slots = slots})
        else
            GNotify(source,"Insufficient funds!")
        end
    end)
end)

RegisterServerEvent("garage:buyslots")
AddEventHandler("garage:buyslots",function(gid, slots, slots_purchased)
    local source = tonumber(source)
    local cost = slotprice * slots_purchased
    TriggerEvent('core:getuser', source, function(user)
        if(user.get("wallet") >= tonumber(cost))then
            user.removeWallet(cost)
            exports["GHMattiMySQL"]:QueryAsync("UPDATE garages SET cost=@cost, slots=@slots WHERE (character_id = @character_id) AND (garage_id = @garage_id)", {
                ["@character_id"] = user.get("characterID"),
                ["@garage_id"] = gid,
                ["@cost"] = cost/2, 
                ["@slots"] = slots,
            })          
            GNotify(source,"Garage slots purchased!")
            TriggerClientEvent("garage:buyslots", source, slots, gid)
        elseif(user.get("bank") >= tonumber(cost))then
            user.removeBank(cost)
            exports["GHMattiMySQL"]:QueryAsync("UPDATE garages SET cost=@cost, slots=@slots WHERE (character_id = @character_id) AND (garage_id = @garage_id)", {
                ["@character_id"] = user.get("characterID"),
                ["@garage_id"] = gid,
                ["@cost"] = cost/2, 
                ["@slots"] = slots,
            })          
            GNotify(source,"Garage slots purchased!")
            TriggerClientEvent("garage:buyslots", source, slots, gid)
        else
            GNotify(source,"Insufficient funds!")
        end
    end)
end)

RegisterServerEvent("garage:insurance")
AddEventHandler("garage:insurance",function(plate,model,index)
    local source = tonumber(source)
    local cost = (insurance[model] or 125000)/10
    TriggerEvent('core:getuser', source, function(user)
        if(user.get("wallet") >= tonumber(cost))then
            exports["GHMattiMySQL"]:QueryAsync("UPDATE vehicles SET insurance=@insurance WHERE (character_id = @character_id) AND (plate = @plate)", {
                ["@character_id"] = user.get("characterID"),
                ["@plate"] = tonumber(plate, 16),
                ["@insurance"] = "true",
            })
            user.removeWallet(cost)
            GNotify(source,"Insurance purchased!")
            TriggerClientEvent("garage:insurance", source, index)
        elseif(user.get("bank") >= tonumber(cost))then
            exports["GHMattiMySQL"]:QueryAsync("UPDATE vehicles SET insurance=@insurance WHERE (character_id = @character_id) AND (plate = @plate)", {
                ["@character_id"] = user.get("characterID"),
                ["@plate"] = tonumber(plate, 16),
                ["@insurance"] = "true",
            })
            user.removeBank(cost)
            GNotify(source,"Insurance purchased!")
            TriggerClientEvent("garage:insurance", source, index)
        else
            GNotify(source,"Insufficient funds!")
        end
    end)
end)

RegisterServerEvent("garage:sell")
AddEventHandler("garage:sell", function(plate, model, index)
    local source = tonumber(source)
    TriggerEvent('core:getuser', source, function(user)
        user.addWallet(cars[model]/2)
        exports["GHMattiMySQL"]:QueryAsync("DELETE FROM vehicles WHERE (character_id = @character_id) AND (plate = @plate)", {
            ["@character_id"] = user.get("characterID"),
            ["@plate"] = tonumber(plate, 16),
        })
        GNotify(source,"Vehicle sold!")
        TriggerClientEvent("garage:sold", source, index)
    end)
end)

RegisterServerEvent("garage:sellg")
AddEventHandler("garage:sellg", function(gid)
    local source = tonumber(source)
    TriggerEvent('core:getuser', source, function(user)
        local cost = exports['GHMattiMySQL']:QueryScalar("SELECT cost FROM garages WHERE (character_id = @character_id) AND (garage_id = @garage_id)", {["@character_id"] = user.get("characterID"), ["@garage_id"] = gid})
        user.addBank(cost)
        exports["GHMattiMySQL"]:QueryAsync("DELETE FROM garages WHERE (character_id = @character_id) AND (garage_id = @garage_id)", {
            ["@character_id"] = user.get("characterID"),
            ["@garage_id"] = gid,
        })         
        GNotify(source,"Garage sold!")
        TriggerClientEvent("garage:transfer", source)
    end)
end)

RegisterServerEvent("garage:pay_impound")
AddEventHandler("garage:pay_impound", function(index)
    local source = tonumber(source)
    TriggerEvent('core:getuser', source, function(user)
        if user.get("wallet") >= 500 then
            user.removeWallet(500)
            TriggerClientEvent("garage:pay_impound", source, index)
        elseif user.get("bank") >= 500 then
            user.removeBank(500)
            TriggerClientEvent("garage:pay_impound", source, index)
        else
            GNotify(source,"Insufficient funds")
        end
    end)
end)

RegisterServerEvent("garage:claim")
AddEventHandler("garage:claim", function(index)
    local source = tonumber(source)
    TriggerEvent('core:getuser', source, function(user)
        if user.get("wallet") >= 750 then
            user.removeWallet(750)
            TriggerClientEvent("garage:claim", source, index)
        elseif user.get("bank") >= 750 then
            user.removeBank(750)
            TriggerClientEvent("garage:claim", source, index)
        else
            GNotify(source,"Insufficient funds")
        end
    end)
end)

function GNotify(source,message)
    TriggerClientEvent("pNotify:SendNotification", source, {text = message,type = "error",queue = "left",timeout = 2500,layout = "bottomCenter"})
end

function updateCar(source, data)
    TriggerEvent("core:getuser", source, function(user)
        exports["GHMattiMySQL"]:QueryAsync("UPDATE vehicles SET garage_id=@garage_id, instance=@instance, state=@state, primary_colour=@primary_colour, secondary_colour=@secondary_colour, pearlescent_colour=@pearlescent_colour, wheel_colour=@wheel_colour, smoke_colour=@smoke_colour, plate_colour=@plate_colour, neon_colour=@neon_colour, tint_colour=@tint_colour, mod0=@mod0, mod1=@mod1, mod2=@mod2, mod3=@mod3, mod4=@mod4, mod5=@mod5, mod6=@mod6, mod7=@mod7, mod8=@mod8, mod10=@mod10, mod11=@mod11, mod12=@mod12, mod13=@mod13, mod14=@mod14, mod15=@mod15, mod16=@mod16, mod23=@mod23, mod24=@mod24, mod25=@mod25, mod26=@mod26, mod27=@mod27, mod28=@mod28, mod29=@mod29, mod30=@mod30, mod31=@mod31, mod32=@mod32, mod33=@mod33, mod34=@mod34, mod35=@mod35, mod36=@mod36, mod37=@mod37, mod38=@mod38, mod39=@mod39, mod40=@mod40, mod41=@mod41, mod42=@mod42, mod43=@mod43, mod44=@mod44, mod45=@mod45, mod46=@mod46, mod48=@mod48, tyre_smoke=@tyre_smoke, xenon_lights=@xenon_lights, turbo=@turbo, custom_wheels=@custom_wheels, custom_wheels2=@custom_wheels2, bulletproof_wheels=@bulletproof_wheels, wheeltype=@wheeltype, neon0=@neon0, neon1=@neon1, neon2=@neon2, neon3=@neon3, engine_health=@engine_health, petrol_health=@petrol_health, vehicle_health=@vehicle_health, insurance=@insurance WHERE (character_id = @character_id) AND (plate = @plate)", { 
            ["@character_id"] = user.get("characterID"),
            ["@garage_id"] = data.garage_id,
            ["@model"] = data.model,
            ["@name"] = data.name,
            ["@instance"] = data.instance,
            ["@plate"] = tonumber(data.plate, 16),
            ["@state"] = data.state,
            ["@primary_colour"] = data.primary_colour,
            ["@secondary_colour"] = data.secondary_colour,
            ["@pearlescent_colour"] = data.pearlescent_colour,
            ["@wheel_colour"] = data.wheel_colour,
            ["@smoke_colour"] = json.encode(data.smoke_colour),
            ["@plate_colour"] = data.plate_colour,
            ["@neon_colour"] = json.encode(data.neon_colour),
            ["@tint_colour"] = data.tint_colour,
            ["@mod0"] = data.mod0,
            ["@mod1"] = data.mod1,
            ["@mod2"] = data.mod2,
            ["@mod3"] = data.mod3,
            ["@mod4"] = data.mod4,
            ["@mod5"] = data.mod5,
            ["@mod6"] = data.mod6,
            ["@mod7"] = data.mod7,
            ["@mod8"] = data.mod8,
            ["@mod9"] = data.mod9,
            ["@mod10"] = data.mod1,
            ["@mod11"] = data.mod11,
            ["@mod12"] = data.mod12,
            ["@mod13"] = data.mod13,
            ["@mod14"] = data.mod14,
            ["@mod15"] = data.mod15,
            ["@mod16"] = data.mod16,
            ["@mod23"] = data.mod23,
            ["@mod24"] = data.mod24,
            ["@mod25"] = data.mod25,
            ["@mod26"] = data.mod26,
            ["@mod27"] = data.mod27,
            ["@mod28"] = data.mod28,
            ["@mod29"] = data.mod29,
            ["@mod30"] = data.mod30,
            ["@mod31"] = data.mod31,
            ["@mod32"] = data.mod32,
            ["@mod33"] = data.mod33,
            ["@mod34"] = data.mod34,
            ["@mod35"] = data.mod35,
            ["@mod36"] = data.mod36,
            ["@mod37"] = data.mod37,
            ["@mod38"] = data.mod38,
            ["@mod39"] = data.mod39,
            ["@mod40"] = data.mod40,
            ["@mod41"] = data.mod41,
            ["@mod42"] = data.mod42,
            ["@mod43"] = data.mod43,
            ["@mod44"] = data.mod44,
            ["@mod45"] = data.mod45,
            ["@mod46"] = data.mod46,
            ["@mod48"] = data.mod48,
            ["@tyre_smoke"] = data.tyre_smoke,
            ["@xenon_lights"] = data.xenon_lights,
            ["@turbo"] = data.turbo,
            ["@custom_wheels"] = data.custom_wheels,
            ["@custom_wheels2"] = data.custom_wheels2,
            ["@bulletproof_wheels"] = data.bulletproof_wheels,
            ["@wheeltype"] = data.wheeltype,
            ["@neon0"] = data.neon0,
            ["@neon1"] = data.neon1,
            ["@neon2"] = data.neon2,
            ["@neon3"] = data.neon3,
            ["@engine_health"] = data.engine_health,
            ["@petrol_health"] = data.petrol_health,
            ["@vehicle_health"] = data.vehicle_health,
            ["@body_health"] = data.body_health,
            ["@insurance"] = data.insurance,
        })
    end)
end